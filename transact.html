<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Transaction - MarJuan Apartments</title>
    <link rel="stylesheet" href="css/transact.css">
</head>
<body>
    <div class="sidebar">
        <a href="dashboard.html">DASHBOARD</a>
        <a href="tenant-info.html">TENANTS</a>
        <a href="occupancy.html">OCCUPANCY</a>
        <a href="transact.html" class="active">TRANSACTION</a>
        <a href="room.html">ROOM</a>
        <a href="finance.html">FINANCE</a> 
        <a href="account.html">ACCOUNT</a>
        <a href="#" id="logoutBtn">LOG OUT</a> <!-- Log Out Button -->
    </div>


    <div class="content">
        <h1>Transaction Overview</h1>
        <table>
            <thead>
                <tr>
                    <th>Tenant Name</th>
                    <th>Amount</th>
                    <th>Status</th>
                    <th>Actions</th>
                </tr>
            </thead>
            <tbody id="tenant-table-body">
                <!-- Tenant rows will be populated dynamically here -->
            </tbody>            
        </table>
    </div>

    <!-- Modal for Payment History -->
    <div id="paymentModal" class="modal">
        <div class="modal-content">
            <span class="close" onclick="closePaymentModal()">&times;</span>
            <h2>Payment History for <span id="tenant-name"></span></h2>
            <div class="payment-history">
                <table>
                    <thead>
                        <tr>
                            <th>Date</th>
                            <th>Amount</th>
                            <th>Status</th>
                        </tr>
                    </thead>
                    <tbody id="payment-history-body">
                        <!-- Payment history will be populated here -->
                    </tbody>
                </table>
            </div>
        </div>
    </div>

    <!-- Modal for Sending Message -->
    <div id="messageModal" class="modal message-modal">
        <div class="message-modal-content">
            <span class="close" onclick="closeMessageModal()">&times;</span>
            <h2>Send Message to <span id="tenant-name-message"></span></h2>
            <div class="form-group">
                <label for="message">Message:</label>
                <textarea id="message" rows="5"></textarea>
            </div>
            <button class="btn" onclick="sendMessage()">Send</button>
        </div>
    </div>

    <script>
        // Get modal elements
        var paymentModal = document.getElementById("paymentModal");
        var tenantNameSpan = document.getElementById("tenant-name");
        var paymentHistoryBody = document.getElementById("payment-history-body");
        
        var messageModal = document.getElementById("messageModal");
        var tenantNameMessageSpan = document.getElementById("tenant-name-message");
        var messageInput = document.getElementById("message");

        // Function to view payment history
        function viewPaymentHistory(tenantName) {
            tenantNameSpan.textContent = tenantName;

            // Example of populating payment history based on tenant
            paymentHistoryBody.innerHTML = `
                <tr><td>2024-01-01</td><td>$200</td><td>Paid</td></tr>
                <tr><td>2024-02-01</td><td>$300</td><td>Paid</td></tr>
                <tr><td>2024-03-01</td><td>$300</td><td>Due</td></tr>
            `;

            // Show the payment history modal
            paymentModal.style.display = "block";
        }

        // Close the payment history modal
        function closePaymentModal() {
            paymentModal.style.display = "none";
        }

        // Function to open message modal
        function openMessageModal(tenantName) {
            tenantNameMessageSpan.textContent = tenantName;
            messageInput.value = ''; // Clear the message input field
            messageModal.style.display = "block";
        }

        // Close the message modal
        function closeMessageModal() {
            messageModal.style.display = "none";
        }

        // Function to send message
        function sendMessage() {
            var message = messageInput.value;
            if (message) {
                alert("Message sent to " + tenantNameMessageSpan.textContent + ": " + message);
                closeMessageModal(); // Close the modal after sending
            } else {
                alert("Please enter a message before sending.");
            }
        }

        // Close modal when clicking outside of it
        window.onclick = function(event) {
            if (event.target == paymentModal) {
                closePaymentModal();
            }
            if (event.target == messageModal) {
                closeMessageModal();
            }
        } 
        // Log Out Button Functionality
        document.getElementById('logoutBtn').onclick = function() {
            window.location.href = 'log in.html'; // Change this to your actual login page URL
        } 

    </script>
</body>
</html>
